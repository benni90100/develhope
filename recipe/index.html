<form id="myForm">
  <label for="name">Nome:</label>
  <input type="text" id="name" name="name">

  <label for="email">Email:</label>
  <input type="email" id="email" name="email">
  <label for="indirizzo">indirizzo:</label>
  <input type="indirizzo" id="idirizzo" name="indirizzo">

  <input type="button" value="Invia" onclick="ottieniDatiModulo()">
</form>

<script>
// function ottieniDatiModulo() {

//   const modulo = document.getElementById("myForm");
//   const formData = new FormData(modulo);
//   formData.forEach(function(value, key){
//     console.log(key + ": " + value);
//   });
//   const obj = new Object(formData)
//   console.log(obj);

// }

/* fetch('https://jsonplaceholder.typicode.com/posts')
.then(response => response.json())
.then(posts => console.log(posts))
.catch(error => console.error(error)) */

const form = document.querySelector('form')

async function fetchData(event) {
  try {
    event.preventDefault()

/*     const formData = new FormData(form)

    let obj = {}

    formData.forEach((value, key) => {
      console.log(value, key);
      obj[key] = value
    }) */

    const obj = {
      title: form.title.value,
      body: form.body.value,
      userId: form.userid.value
    }

    const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json; charset=UTF-8'
      },
      body: JSON.stringify(obj)
    })

    const data = await response.json()
    

    console.log(data);
  } catch (error) {
    console.error(error)
  }
}


form.addEventListener('submit', fetchData)
</script>